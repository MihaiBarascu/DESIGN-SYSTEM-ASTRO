---
/**
 * Newsletter Signup Component
 * Displayed above footer - email capture for marketing
 * Uses FormSubmit for form handling
 */
import { Icon } from 'astro-icon/components';
import siteSettings from '~/data/settings/site.json';

interface Props {
  title?: string;
  subtitle?: string;
  buttonText?: string;
}

const {
  title = 'Abonează-te la Newsletter',
  subtitle = 'Primește noutăți, oferte speciale și informații utile direct în inbox.',
  buttonText = 'Abonează-te',
} = Astro.props;

// FormSubmit for newsletter
const formSubmitEmail = siteSettings.contact?.email || 'contact@siteplus.ro';
const formAction = `https://formsubmit.co/${formSubmitEmail}`;
---

<section
  class="newsletter-section py-12 md:py-16 bg-gradient-to-r from-secondary via-secondary/95 to-secondary relative overflow-hidden"
>
  <!-- Background decoration -->
  <div class="absolute inset-0 opacity-10">
    <div
      class="absolute top-0 right-0 w-96 h-96 bg-primary rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"
    >
    </div>
    <div
      class="absolute bottom-0 left-0 w-64 h-64 bg-primary rounded-full blur-3xl transform -translate-x-1/2 translate-y-1/2"
    >
    </div>
  </div>

  <div class="max-w-4xl mx-auto px-4 sm:px-6 relative z-10">
    <div class="text-center mb-8">
      <h2 class="text-2xl md:text-3xl font-bold text-white mb-3">{title}</h2>
      <p class="text-white/80 max-w-xl mx-auto">{subtitle}</p>
    </div>

    <form action={formAction} method="POST" class="flex flex-col sm:flex-row gap-4 max-w-xl mx-auto">
      <!-- FormSubmit Configuration -->
      <input type="hidden" name="_subject" value="Abonare nouă la Newsletter" />
      <input type="hidden" name="_captcha" value="false" />
      <input type="hidden" name="_template" value="box" />
      <input type="hidden" name="_next" value="/?newsletter=success" />
      <input type="text" name="_honey" style="display:none" />
      <input type="hidden" name="type" value="newsletter_subscription" />

      <div class="flex-1">
        <label for="newsletter-email" class="sr-only">Adresa de email</label>
        <input
          type="email"
          id="newsletter-email"
          name="email"
          placeholder="Introduceți adresa de email"
          required
          class="w-full px-5 py-3.5 rounded-full bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"
        />
      </div>

      <button
        type="submit"
        class="px-8 py-3.5 bg-primary hover:bg-primary/90 text-secondary font-semibold rounded-full transition-all hover:transform hover:-translate-y-0.5 hover:shadow-lg hover:shadow-primary/30 flex items-center justify-center gap-2"
      >
        <span>{buttonText}</span>
        <Icon name="tabler:send" class="w-5 h-5" />
      </button>
    </form>

    <p class="text-center text-white/60 text-sm mt-4">
      <Icon name="tabler:lock" class="w-4 h-4 inline-block mr-1" />
      Nu trimitem spam. Te poți dezabona oricând.
    </p>
  </div>
</section>

<style>
  .newsletter-section input::placeholder {
    color: rgba(255, 255, 255, 0.6);
  }

  .newsletter-section input:focus::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }
</style>
